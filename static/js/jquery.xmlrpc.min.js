(function(j){"use strict";var q=function(){Error.apply(this,arguments)};q.prototype=new Error();q.prototype.type='XML-RPC fault';var d=j.xmlrpc=function(a,b){if(arguments.length==2){b.url=a}else{b=a;a=b.url}b.dataType='xml json';b.type='POST';b.contentType='text/xml';b.converters={'xml json':d.parseDocument};var c=d.document(b.methodName,b.params);var f=new XMLSerializer();b.data=f.serializeToString(c);return j.ajax(b)};d.document=function(c,f){var g=document.implementation.createDocument(null,null,null);var e=function(a){return j(g.createElement(a))};var i=e('methodName').text(c);var h=e('params').append(j.map(f,function(a){var b=e('value').append(d.toXmlRpc(a,e));return e('param').append(b)}));var k=e('methodCall').append(i,h);g.appendChild(k.get(0));return g};var s=function(a){return(a===parseInt(a,10))&&!isNaN(a)};d.toXmlRpc=function(a,b){if(a instanceof r)return a.toXmlRpc(b);var c=j.xmlrpc.types;var f=j.type(a);switch(f){case"undefined":case"null":return c.nil.encode(a,b);case"date":return c['date.iso8601'].encode(a,b);case"object":if(a instanceof ArrayBuffer){return c.base64.encode(a,b)}else{return c.struct.encode(a,b)}break;case"number":if(s(a)){return c['int'].encode(a,b)}else{return c['double'].encode(a,b)}break;case"array":case"boolean":case"string":return c[f].encode(a,b);default:throw new Error("Unknown type",a);}};d.parseDocument=function(a){var b=j(a);var c=b.children('methodresponse');var f;var g=c.find('> fault');if(g.length===0){var e=c.find('> params > param > value > *');var i=e.toArray().map(d.parseNode);return i}else{var h=d.parseNode(g.find('> value > *').get(0));var k=new q(h.faultString);k.msg=k.message=h.faultString;k.type=k.code=h.faultCode;throw k;}};d.parseNode=function(a){var b=a.nodeName.toLowerCase();if(b in d.types){return d.types[b].decode(a)}else{throw new Error('Unknown type '+b);}};var r=function(){};j.xmlrpc.types={};d.makeType=function(f,g,e,i){var h;h=function(a){this.value=a};h.prototype=new r();h.prototype.tagName=f;if(g){var k=e,l=i;e=function(a,b){var c=k(a);return b(h.tagName).text(c)};i=function(a){return l(j(a).text(),a)}}h.prototype.toXmlRpc=function(a){return h.encode(this.value,a)};h.tagName=f;h.encode=e;h.decode=i;d.types[f]=h};var m=function(a){return''+Math.floor(a)};var n=function(a,b){return parseInt(a,10)};d.makeType('int',true,m,n),d.makeType('i4',true,m,n),d.makeType('i8',true,m,n),d.makeType('i16',true,m,n),d.makeType('i32',true,m,n),d.makeType('double',true,String,function(a){return parseFloat(a,10)});d.makeType('string',true,String,String);d.makeType('boolean',true,function(a){return a?'1':'0'},function(a){return a=='1'});var o=function(a){return a<10?'0'+a:a};d.makeType('date.iso8601',true,function(a){return[a.getUTCFullYear(),'-',o(a.getUTCMonth()+1),'-',o(a.getUTCDate()),'T',o(a.getUTCHours()),':',o(a.getUTCMinutes()),':',o(a.getUTCSeconds()),'Z'].join('')},function(a){return new Date(a)});d.binary=(function(){var k='=';var l=('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/').split("");var p=l.reduce(function(a,b,c){a[b]=c;return a},{});return{toBase64:function(a){var b=[];var c=new Uint8Array(a);var f=0,g;for(;f>18)%64]);b.push(l[(g>>12)%64]);b.push(l[(g>>6)%64]);b.push(l[(g>>0)%64])}var e=3-((a.byteLength%3)||3);while(e--){b[b.length-e-1]=k}return b.join('')},fromBase64:function(a){var b=a.length;var c=(b/4)*3;if(a.charAt(b-1)==k)c--;if(a.charAt(b-2)==k)c--;var f=new ArrayBuffer(c);var g=new Uint8Array(f);var e=0,i=0,h;for(;e>16)%256;g[i+1]=(h>>8)%256;g[i+2]=(h>>0)%256}return f}}})();d.makeType('base64',true,function(a){return d.binary.toBase64(a)},function(a){return d.binary.fromBase64(a)});d.makeType('nil',false,function(a,b){return b('nil')},function(a){return null});d.makeType('struct',false,function(g,e){var i=e('struct');j.each(g,function(a,b){var c=e('name').text(a);var f=e('value').append(d.toXmlRpc(b,e));i.append(e('member').append(c,f))});return i},function(e){return j(e).find('> member').toArray().reduce(function(a,b){var c=j(b);var f=c.find('> name').text();var g=d.parseNode(c.find('> value > *').get(0));a[f]=g;return a},{})}
