{% extends "base.html" %}
{% from "_formhelpers.html" import render_field %}

{% block body %}
<ul class="breadcrumb">
  <li><a href="..">Home</a> <span class="divider">/</span></li>
  <li class="active">Transaction</li>
</ul>

<form action="{{ url_for('enter_sale') }}" method=post>
	<dl>
		{{ render_field(form.party) }}
		{{ render_field(form.date) }}
		{{ render_field(form.item_type) }}
		{{ render_field(form.item_quantity) }}
		<dd><input type=submit value=Save></dd>
	</dl>
</form>

<script src="{{ url_for('static', filename='js/jquery.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/bootstrap-datepicker.js') }}"></script>
<script src="{{ url_for('static', filename='js/bootstrap-typeahead.js') }}"></script>
<script type="text/javascript">
    $(document).ready(function() {
		var parties = {{ parties|safe }}
		console.log(parties)
		$('#date').datepicker({format: 'yyyy-mm-dd'});
        var now = new Date();
        $('#date').datepicker('setValue', now);
        $('#party').typeahead({source: parties, items:5});
        $('#party').attr('autocomplete', 'off');
    });
</script>
{% endblock %}
